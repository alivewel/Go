1) 
``` go
package main

import "fmt"

func main(){
	s1 := []int{1, 2, 3}     // s1: [1 2 3]
	// s1 := make([]int, 3, 4) // cap > len
	s2 := s1[1:]             // s2: [2 3] (—Å–ª–∞–π—Å —Å—Å—ã–ª–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ, —á—Ç–æ –∏ s1)
	s2 = append(s2, 4)       // s2: [2 3 4] ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, –≤—ã–¥–µ–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –ø–∞–º—è—Ç—å!
	s2[0] = 10               // –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç s2 ‚Äî –Ω–æ –≤–ª–∏—è–µ—Ç –ª–∏ —ç—Ç–æ –Ω–∞ s1?

    fmt.Println(s1) // [1 2 3]
    fmt.Println(s2) // [10 3 4]
	// fmt.Println(s1) // [0 10 0]
    // fmt.Println(s2) // [10 0 4]
}
```

2) 
``` go
package main

import "fmt"

func main(){
    a := make([]int, 0, 4)
    a = append(a, 1,2,3)
    appendSlice(a)
    fmt.Println(a[:]) // [1 2 3]
    fmt.Println(a[:4]) // [1 2 3 4]
}

func appendSlice(a []int) {
    a = append(a, 4)
}
```

3) 

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî —Å–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞–µ–º —Ä–µ–≤—å—é –∫–æ–¥–∞, –∞ –∑–∞—Ç–µ–º —Ä–∞–∑–±–µ—Ä—ë–º—Å—è, –∫–∞–∫ **—Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É** –∏ **–∫–∞–∫–∏–µ –µ—Å—Ç—å –ø–æ–¥—Ö–æ–¥—ã: –∞—Ç–æ–º–∏–∫–∏, –º—å—é—Ç–µ–∫—Å—ã, RWMutex ‚Äî –∏ –∫–æ–≥–¥–∞ —á—Ç–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å.**

---

### üîç –ß—Ç–æ **–Ω–µ —Ç–∞–∫** —Å –∫–æ–¥–æ–º:

```go
var counter int
...
go func() {
    counter++
}
```

* –û–ø–µ—Ä–∞—Ü–∏—è `counter++` **–Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ–π**. –û–Ω–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:

  1. –ß—Ç–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è `counter`
  2. –ü—Ä–∏–±–∞–≤–ª–µ–Ω–∏—è 1
  3. –ó–∞–ø–∏—Å–∏ –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ –≤ `counter`

* –¢–∞–∫ –∫–∞–∫ `counter` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **–º–Ω–æ–≥–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö**, –≤–æ–∑–Ω–∏–∫–∞–µ—Ç **–≥–æ–Ω–∫–∞ –¥–∞–Ω–Ω—ã—Ö (data race)**.

* –ò—Ç–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `counter` **–Ω–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ 1000** ‚Äî –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

### ‚úÖ –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å ‚Äî —Ç—Ä–∏ —Å–ø–æ—Å–æ–±–∞

---

#### ‚úÖ 1. –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `sync.Mutex`:

```go
var counter int
var mu sync.Mutex
...
go func() {
    defer wg.Done()
    mu.Lock()
    counter++
    mu.Unlock()
}()
```

üî∏ **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

* –ö–æ–≥–¥–∞ —Ç–µ–±–µ –Ω—É–∂–Ω–æ **–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –¥–æ—Å—Ç—É–ø** –∫ —Ä–µ—Å—É—Ä—Å—É
* –ü—Ä–æ—Å—Ç–æ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

---

#### ‚úÖ 2. –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `sync/atomic`:

```go
import "sync/atomic"

var counter int64
...
go func() {
    defer wg.Done()
    atomic.AddInt64(&counter, 1)
}()
```

üî∏ **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**

* –í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–µ —Å—á—ë—Ç—á–∏–∫–∏, —Ñ–ª–∞–≥–∏, —Å—á—ë—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
* –ù—É–∂–Ω–æ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ–µ** –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–µ–∑ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –æ—Ç `mutex`

---

#### ‚úÖ 3. –° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `sync.RWMutex`:

`RWMutex` ‚Äî —ç—Ç–æ **—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –º—å—é—Ç–µ–∫—Å**, –¥–∞—é—â–∏–π:

* **RLock** ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –º–æ–≥—É—Ç **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —á–∏—Ç–∞—Ç—å**
* **Lock** ‚Äî —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –º–æ–∂–µ—Ç –ø–∏—Å–∞—Ç—å (–±–ª–æ–∫–∏—Ä—É–µ—Ç –∏ —á—Ç–µ–Ω–∏–µ, –∏ –∑–∞–ø–∏—Å—å)

‚ö†Ô∏è –í **—ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –Ω–µ –Ω—É–∂–µ–Ω `RWMutex`**, —Ç–∞–∫ –∫–∞–∫ `counter++` ‚Äî —ç—Ç–æ **–∑–∞–ø–∏—Å—å**. –û–Ω –Ω—É–∂–µ–Ω, –µ—Å–ª–∏:

* –£ —Ç–µ–±—è –º–Ω–æ–≥–æ —á—Ç–µ–Ω–∏–π –∏ –º–∞–ª–æ –∑–∞–ø–∏—Å–µ–π
* –ù–∞–ø—Ä–∏–º–µ—Ä, –∫—ç—à –∏–ª–∏ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫

---

### üß† –ö–æ–≥–¥–∞ —á—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ‚Äî —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ü–æ–¥—Ö–æ–¥         | –ü—Ä–∏–º–µ—Ä                     | –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞                           | –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏                                       | –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—Ç—å                |
| -------------- | -------------------------- | -------------------------------------- | ------------------------------------------------ | ------------------------------ |
| `sync.Mutex`   | `mu.Lock()`                | –ü—Ä–æ—Å—Ç–æ, –±–µ–∑–æ–ø–∞—Å–Ω–æ                      | –ú–µ–¥–ª–µ–Ω–Ω–µ–µ –∞—Ç–æ–º–∏–∫–æ–≤                               | –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–∫—Ü–∏–π |
| `sync.RWMutex` | `rw.RLock()` / `rw.Lock()` | –ë—ã—Å—Ç—Ä–æ–µ —á—Ç–µ–Ω–∏–µ, –º–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å       | –°–ª–æ–∂–Ω–µ–µ –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, –º–æ–∂–µ—Ç ¬´–∑–∞–ø–µ—Ä–µ—Ç—å¬ª —á—Ç–µ–Ω–∏–µ | –ö–æ–≥–¥–∞ 90% –æ–ø–µ—Ä–∞—Ü–∏–π ‚Äî —á—Ç–µ–Ω–∏–µ    |
| `atomic`       | `atomic.AddInt64()`        | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ, –Ω–∏–∑–∫–∏–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã | –¢–æ–ª—å–∫–æ –¥–ª—è **–ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤** (`int`, `bool`)        | –°—á—ë—Ç—á–∏–∫–∏, —Ñ–ª–∞–≥–∏, –º–µ—Ç—Ä–∏–∫–∏       |

---

### üß™ –ß—Ç–æ —Å–ø—Ä–æ—Å–∏—Ç—å/–æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏:

* **–ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `counter++` –≤ –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö?**
  ‚Üí –ü–æ—Ç–æ–º—É —á—Ç–æ —ç—Ç–æ –Ω–µ –∞—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è. –í–æ–∑–Ω–∏–∫–∞–µ—Ç data race.

* **–ö–∞–∫ –º–æ–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å?**
  ‚Üí –° –ø–æ–º–æ—â—å—é `Mutex`, `atomic`, `channel`, `sync.Map` ‚Äî –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á–∏.

* **–ß—Ç–æ –≤—ã–±—Ä–∞—Ç—å: Mutex –∏–ª–∏ atomic?**
  ‚Üí –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—á—ë—Ç—á–∏–∫ ‚Üí `atomic`.
  ‚Üí –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—à—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ ‚Üí `Mutex`.

* **–ê –µ—Å–ª–∏ —á—Ç–µ–Ω–∏–π –º–Ω–æ–≥–æ, –∞ –∑–∞–ø–∏—Å–∏ —Ä–µ–¥–∫–∏–µ?**
  ‚Üí –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `RWMutex`: `RLock()` –¥–ª—è —á—Ç–µ–Ω–∏—è, `Lock()` –¥–ª—è –∑–∞–ø–∏—Å–∏.

---

–•–æ—á–µ—à—å, —è –ø—Ä–∏–≤–µ–¥—É –±–µ–Ω—á–º–∞—Ä–∫ `Mutex vs Atomic` –¥–ª—è —Å—á—ë—Ç—á–∏–∫–æ–≤, —á—Ç–æ–±—ã —Å—Ä–∞–≤–Ω–∏—Ç—å –∏—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?

4) 

```go
func test() int {
    x := 5
    defer func() {
        x = x + 10
    }()
    return x
}

func main() {
    fmt.Println(test()) // 5
}
```

---

### üí° –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç: **–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `defer` –∏ `return`**

–í Go –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `return x` —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö —à–∞–≥–æ–≤:

1. **–°–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ** (—Ç–æ –µ—Å—Ç—å `x = 5`)
2. **–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤—Å–µ `defer`-—Ñ—É–Ω–∫—Ü–∏–∏**
3. **–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ**

---

### üîç –ü–æ—à–∞–≥–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:

* `x := 5`
* `defer`: –æ—Ç–ª–æ–∂–µ–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `x = x + 10` (–æ–Ω–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø–æ–∑–∂–µ)
* `return x`:

  * —Å–Ω–∞—á–∞–ª–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ `x = 5` –≤ "return slot"
  * –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è `x = x + 10`, –Ω–æ —ç—Ç–æ —É–∂–µ **–Ω–µ –≤–ª–∏—è–µ—Ç** –Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
* –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `5`

---

### ‚úÖ –û—Ç–≤–µ—Ç:

```go
5
```

---

### üß† –ß—Ç–æ–±—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—ã–ª **15**, –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å `x` **—á–µ—Ä–µ–∑ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:

```go
func test() (x int) {
    x = 5
    defer func() {
        x = x + 10 // —Ç–µ–ø–µ—Ä—å –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    }()
    return
}
```

–¢–µ–ø–µ—Ä—å `x` ‚Äî –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∏ `defer` –µ–≥–æ –∏–∑–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º.

‚úÖ –í—ã–≤–æ–¥ –±—É–¥–µ—Ç:

```go
15
```

5) 

## üîé –ß—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ

### –ö–æ–¥:

```go
m := make(map[string]int)
m["a"] = 1

p := &m["a"]
*p = 42

fmt.Println(m)
```

---

### ‚ùó –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:

```bash
cannot take the address of m["a"]
```

---

### üìå –ü–æ—á–µ–º—É?

–í Go **–Ω–µ–ª—å–∑—è –≤–∑—è—Ç—å –∞–¥—Ä–µ—Å —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞–ø—ã –Ω–∞–ø—Ä—è–º—É—é**:

```go
p := &m["a"] // ‚ùå –æ—à–∏–±–∫–∞
```

–ü–æ—Ç–æ–º—É —á—Ç–æ:

* –ú–∞–ø—ã –≤ Go **–Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏**.
* –ú–∞–ø–∞ ‚Äî —ç—Ç–æ **—Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞**, –∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ (–≤—Å—Ç–∞–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ/—ç–≤–∞–∫—É–∞—Ü–∏—è) —ç–ª–µ–º–µ–Ω—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å **–ø–µ—Ä–µ–º–µ—â–µ–Ω—ã** –∏–ª–∏ **—É–¥–∞–ª–µ–Ω—ã**.
* –ï—Å–ª–∏ –±—ã Go –ø–æ–∑–≤–æ–ª–∏–ª –±—Ä–∞—Ç—å –∞–¥—Ä–µ—Å `&m["a"]`, –æ–Ω –±—ã –Ω–µ –º–æ–≥ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å –±—É–¥–µ—Ç –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –ø–æ–∑–∂–µ.

---

### ‚úÖ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

–ï—Å–ª–∏ —Ç–µ–±–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—å ‚Äî —Å–¥–µ–ª–∞–π —ç—Ç–æ —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é:

```go
v := m["a"]
p := &v
*p = 42

m["a"] = *p
fmt.Println(m) // map[a:42]
```

---

## üì¶ –ß—Ç–æ —Ç–∞–∫–æ–µ `map` –≤ Go

–ú–∞–ø–∞ –≤ Go ‚Äî —ç—Ç–æ **–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Ö–µ—à-—Ç–∞–±–ª–∏—Ü–∞**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤ runtime.

–û–±—ä—è–≤–ª–µ–Ω–∏–µ:

```go
m := make(map[string]int)
```

–°–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–≥–æ –≤–∏–¥–∞:

```go
type hmap struct {
    count     int           // –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    flags     uint8
    B         uint8         // –ª–æ–≥–∞—Ä–∏—Ñ–º –æ—Ç —á–∏—Å–ª–∞ –±–∞–∫–µ—Ç–æ–≤ (2^B –±–∞–∫–µ—Ç–æ–≤)
    buckets   *bmap         // –º–∞—Å—Å–∏–≤ –±–∞–∫–µ—Ç–æ–≤
    oldbuckets *bmap        // –ø—Ä–∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏ ‚Äî —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è
    nevacuate uintptr       // –ø—Ä–æ–≥—Ä–µ—Å—Å —ç–≤–∞–∫—É–∞—Ü–∏–∏
    ...
}
```

---

## üß† –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω `map` (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)

* –ö–ª—é—á —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è ‚Üí –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –±–∞–∫–µ—Ç–∞
* –í –∫–∞–∂–¥–æ–º –±–∞–∫–µ—Ç–µ ‚Äî –¥–æ 8 –ø–∞—Ä –∫–ª—é—á/–∑–Ω–∞—á–µ–Ω–∏–µ
* –ï—Å–ª–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∞–∫–µ—Ç—ã
* –ö –∫–æ–ª–ª–∏–∑–∏—è–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** –∏ **–æ—Ç–∫—Ä—ã—Ç–∞—è –∞–¥—Ä–µ—Å–∞—Ü–∏—è**

---

## üîÑ –ß—Ç–æ —Ç–∞–∫–æ–µ **—ç–≤–∞–∫—É–∞—Ü–∏—è (evacuation)**

–ö–æ–≥–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ä–∞—Å—Ç—ë—Ç, Go **—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–∫–µ—Ç–æ–≤** (–≤ 2 —Ä–∞–∑–∞), —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

–≠–≤–∞–∫—É–∞—Ü–∏—è ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å **–ø–µ—Ä–µ–Ω–æ—Å–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–∑ —Å—Ç–∞—Ä—ã—Ö –±–∞–∫–µ—Ç–æ–≤ –≤ –Ω–æ–≤—ã–µ**.

### –ü–æ—à–∞–≥–æ–≤–æ:

1. –ö–æ–≥–¥–∞ `count > loadFactor * 2^B`, —Å–æ–∑–¥–∞—ë—Ç—Å—è `oldbuckets = buckets`
2. –°–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ `buckets` –≤ 2 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ
3. –ù–æ–≤—ã–µ –≤—Å—Ç–∞–≤–∫–∏ –∏ —á—Ç–µ–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä—è—Ç **–ø–æ—ç—Ç–∞–ø–Ω—ã–π –ø–µ—Ä–µ–Ω–æ—Å (evacuation)** —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. –ü—Ä–∏ —á—Ç–µ–Ω–∏–∏/–∑–∞–ø–∏—Å–∏ –≤ —Å—Ç–∞—Ä—ã–π –±–∞–∫–µ—Ç Go **–ø–µ—Ä–µ–Ω–æ—Å–∏—Ç** –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –Ω–æ–≤—ã–π –∏ –ø–æ–º–µ—á–∞–µ—Ç –∫–∞–∫ —ç–≤–∞–∫—É–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
5. –ü–æ—Å–ª–µ –≤—Å–µ—Ö —ç–≤–∞–∫—É–∞—Ü–∏–π `oldbuckets = nil`

---

## üö® –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è `&m["a"]` ‚Äî –∏—Ç–æ–≥

* –≠–≤–∞–∫—É–∞—Ü–∏—è –º–æ–∂–µ—Ç **–ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å** —ç–ª–µ–º–µ–Ω—Ç—ã ‚Äî —Å—Å—ã–ª–∫–∏ —É—Å—Ç–∞—Ä–µ–≤–∞—é—Ç.
* –ù–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ `m["a"]` –≤—Å—ë –µ—â—ë **–≤ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ –≤ –ø–∞–º—è—Ç–∏**, —á—Ç–æ –∏ –¥–æ –≤—Å—Ç–∞–≤–∫–∏ –¥—Ä—É–≥–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤.
* –ü–æ—ç—Ç–æ–º—É Go –∑–∞–ø—Ä–µ—â–∞–µ—Ç –±—Ä–∞—Ç—å –∞–¥—Ä–µ—Å: **–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ —É–¥–æ–±—Å—Ç–≤–∞.**

6) 

``` go
package main

import (
    "fmt"
)

// func main() {
//     a := []int{1, 2, 3}
//     b := []int{1, 2, 3}
//     fmt.Println(a == b)
//     // invalid operation: a == b (slice can only be compared to nil)
// }

func main() {
    a := [3]int{1, 2, 3}
    b := [3]int{1, 2, 3}
    fmt.Println(a == b) // true
}
```

---

### ‚ùå –ü–æ—á–µ–º—É `a == b` –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è:

```go
a := []int{1, 2, 3}
b := []int{1, 2, 3}
fmt.Println(a == b) // ‚ùå –æ—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
```

üî∫ –û—à–∏–±–∫–∞:

```
invalid operation: a == b (slice can only be compared to nil)
```

---

### üìå –ü—Ä–∏—á–∏–Ω–∞

–í Go **—Å—Ä–µ–∑—ã (`slice`) ‚Äî —ç—Ç–æ —Å—Å—ã–ª–æ—á–Ω—ã–π —Ç–∏–ø**, –∏ **–Ω–µ–ª—å–∑—è —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –¥–≤–∞ —Å—Ä–µ–∑–∞ –Ω–∞–ø—Ä—è–º—É—é**, –∫—Ä–æ–º–µ –∫–∞–∫ —Å `nil`.

* –û–ø–µ—Ä–∞—Ü–∏—è `==` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ **—Ç–æ–ª—å–∫–æ –¥–ª—è**:

  * –ü—Ä–∏–º–∏—Ç–∏–≤–æ–≤ (`int`, `string`, –∏ —Ç.–ø.)
  * –ú–∞—Å—Å–∏–≤–æ–≤ (`[3]int`)
  * –°—Ç—Ä—É–∫—Ç—É—Ä (–µ—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è —Å—Ä–∞–≤–Ω–∏–º—ã)
  * `nil`-–ø—Ä–æ–≤–µ—Ä–∫–∏ (`a == nil`, `a != nil`)

‚úÖ –î–æ–ø—É—Å—Ç–∏–º–æ:

```go
if a == nil { ... }   // OK
```

‚ùå –ù–µ–ª—å–∑—è:

```go
if a == b { ... }     // –æ—à–∏–±–∫–∞
```

---

### üß™ –ö–∞–∫ —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ —Å—Ä–µ–∑–∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—è–º?

–ò—Å–ø–æ–ª—å–∑—É–π:

#### 1. `reflect.DeepEqual` (–ø—Ä–æ—Å—Ç–æ–µ, –Ω–æ –º–µ–¥–ª–µ–Ω–Ω–æ–µ):

```go
import "reflect"

fmt.Println(reflect.DeepEqual(a, b)) // true
```

#### 2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é:

```go
func slicesEqual(a, b []int) bool {
    if len(a) != len(b) {
        return false
    }
    for i := range a {
        if a[i] != b[i] {
            return false
        }
    }
    return true
}
```

#### 3. Go 1.18+ (Generic `cmp` –∏–ª–∏ `slices.Equal`):

```go
import "golang.org/x/exp/slices"

fmt.Println(slices.Equal(a, b)) // true
```

–ò–ª–∏ —Å Go 1.21+:

```go
import "cmp"

slices.Equal(a, b) // –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–¥—É–ª—å
```

---

### üß† –ü–æ—á–µ–º—É –Ω–µ–ª—å–∑—è —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é?

–ü–æ—Ç–æ–º—É —á—Ç–æ:

* –°—Ä–µ–∑ ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: `{pointer, len, cap}`
* –û–ø–µ—Ä–∞—Ç–æ—Ä `==` —Å—Ä–∞–≤–Ω–∏–ª –±—ã **—É–∫–∞–∑–∞—Ç–µ–ª–∏**, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å **–æ—à–∏–±–æ—á–Ω–æ**
* Go **–ø—Ä–µ–¥–Ω–∞–º–µ—Ä–µ–Ω–Ω–æ –∑–∞–ø—Ä–µ—â–∞–µ—Ç** —Ç–∞–∫—É—é –æ–ø–µ—Ä–∞—Ü–∏—é, —á—Ç–æ–±—ã **–∏–∑–±–µ–∂–∞—Ç—å –±–∞–≥–æ–≤** –Ω–∞ –ø—É—Å—Ç–æ–º –º–µ—Å—Ç–µ

---

### ‚úÖ –í—ã–≤–æ–¥:

| –¢–∏–ø           | –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `==`                    |
| ------------- | --------------------------------- |
| `int`         | ‚úÖ –ú–æ–∂–Ω–æ                           |
| `string`      | ‚úÖ –ú–æ–∂–Ω–æ                           |
| `[]int`       | ‚ùå –ù–µ–ª—å–∑—è                          |
| `map`         | ‚ùå –ù–µ–ª—å–∑—è                          |
| `struct`      | ‚ö†Ô∏è –ú–æ–∂–Ω–æ (–µ—Å–ª–∏ –≤—Å–µ –ø–æ–ª—è —Å—Ä–∞–≤–Ω–∏–º—ã) |
| `interface{}` | ‚ö†Ô∏è –ú–æ–∂–Ω–æ, –Ω–æ –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ            |

7) 
``` go
package main

import (
    "fmt"
)

func main() {
    // ch := make(chan int) // unbuffered channel
    // ch <- 42             // ‚ùå deadlock!
    // val := <-ch
    // fmt.Println(val)

    ch := make(chan int)
    go func() {
        ch <- 42
    }()

    val := <-ch
    fmt.Println(val) // ‚úÖ 42
}
```

8) 
```go
package main

import (
    "fmt"
    "sync"
    "time"
)

func doWork(i int) {
    fmt.Printf("Start: %d\n", i)
    time.Sleep(100 * time.Millisecond) // –∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã
    fmt.Printf("End:   %d\n", i)
}

func main() {
    var wg sync.WaitGroup
    sem := make(chan struct{}, 5) // —Å–µ–º–∞—Ñ–æ—Ä –Ω–∞ 5 "–ø—Ä–æ–ø—É—Å–∫–æ–≤"

    for i := 0; i < 100; i++ {
        wg.Add(1)

        go func(i int) {
            defer wg.Done()

            sem <- struct{}{}   // –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–µ–º–∞—Ñ–æ—Ä
            defer func() { <-sem }() // –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º

            doWork(i)
        }(i)
    }

    wg.Wait()
}
```
9) 

``` go
package main

import (
    "context"
    "fmt"
    "time"
)

const processingMaxTimeout = 3 * time.Second

func main() {
    var result int

    ctx, cancel := context.WithTimeout(context.Background(), processingMaxTimeout)
    defer cancel()

    done := make(chan int, 1)

    go func() {
        result := process()
        done <- result
    }()

    select {
    case res := <-done:
        result = res
    case <-ctx.Done():
        result = 0
    }

    fmt.Println(result)
}

func process() int {
    // long processing job
    time.Sleep(time.Second * 2)

    return 1
}
```

10) 

–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –∫—Ä–∞—Ç–∫–æ, –Ω–∞–≥–ª—è–¥–Ω–æ –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.

---

## üß© –í —á—ë–º –æ—Ç–ª–∏—á–∏–µ `WHERE` –∏ `HAVING`?

| –ö—Ä–∏—Ç–µ—Ä–∏–π                     | `WHERE`                       | `HAVING`                                      |
| ---------------------------- | ----------------------------- | --------------------------------------------- |
| –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è            | **–î–æ** –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (`GROUP BY`) | **–ü–æ—Å–ª–µ** –∞–≥—Ä–µ–≥–∞—Ü–∏–∏                           |
| –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫                | **–°—Ç—Ä–æ–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã**           | **–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º** (`COUNT`, `SUM`, ...) |
| –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç—ã? | ‚ùå –ù–µ—Ç                         | ‚úÖ –î–∞                                          |

---

## üîç –ü—Ä–∏–º–µ—Ä

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å —Ç–∞–±–ª–∏—Ü–∞ `orders`:

| id | user\_id | amount |
| -- | -------- | ------ |
| 1  | 1        | 100    |
| 2  | 1        | 200    |
| 3  | 2        | 50     |
| 4  | 3        | 150    |
| 5  | 3        | 100    |

---

### üìå –ó–∞–¥–∞—á–∞: –≤—ã–±—Ä–∞—Ç—å `user_id`, —É –∫–æ—Ç–æ—Ä—ã—Ö **—Å—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤ > 200**

### ‚ùå –¢–∞–∫ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è (`WHERE` –Ω–µ –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å `SUM`):

```sql
SELECT user_id, SUM(amount)
FROM orders
WHERE SUM(amount) > 200 -- ‚ùå –æ—à–∏–±–∫–∞!
GROUP BY user_id
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å `HAVING`:

```sql
SELECT user_id, SUM(amount) AS total
FROM orders
GROUP BY user_id
HAVING SUM(amount) > 200;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| user\_id | total |
| -------- | ----- |
| 1        | 300   |
| 3        | 250   |

---

## ‚úÖ –ï—â—ë —Ä–∞–∑ –ø–æ —à–∞–≥–∞–º:

1. `WHERE` ‚Üí —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ **–¥–æ** `GROUP BY`
2. `GROUP BY` ‚Üí –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏
3. `HAVING` ‚Üí —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç **–ø–æ—Å–ª–µ** –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

---

## üéØ –ó–∞–ø–æ–º–Ω–∏ –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É–ª—É:

> `WHERE` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç **—Å—ã—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏**
> `HAVING` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç **–∞–≥—Ä–µ–≥–∞—Ç—ã**

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–π –≤–æ–ø—Ä–æ—Å –Ω–∞ —Å–æ–±–µ—Å–µ:

> –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `HAVING` –±–µ–∑ `GROUP BY`?

‚úÖ –î–∞. –¢–æ–≥–¥–∞ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ `WHERE`, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```sql
SELECT COUNT(*) as cnt
FROM orders
HAVING COUNT(*) > 3;
```

---

–•–æ—á–µ—à—å, —è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é –ø–æ–ª–Ω—É—é SQL-–∑–∞–¥–∞—á—É —Å `JOIN`, `GROUP BY`, `HAVING`, –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏, –∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ?

package main

import (
    "fmt"
    "sync"
    "time"
)

const (
    workerCount = 3
    jobCount    = 10
)

func worker(id int, jobs <-chan int, wg *sync.WaitGroup) {
    for job := range jobs {
        fmt.Printf("Worker %d started job %d\n", id, job)
        time.Sleep(time.Second) // –∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã
        fmt.Printf("Worker %d finished job %d\n", id, job)
        wg.Done()
    }
}

func main() {
    jobs := make(chan int, jobCount)
    var wg sync.WaitGroup

    // –∑–∞–ø—É—Å–∫–∞–µ–º –≤–æ—Ä–∫–µ—Ä–æ–≤
    for i := 1; i <= workerCount; i++ {
        go worker(i, jobs, &wg)
    }

    // –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á–∏
    for j := 1; j <= jobCount; j++ {
        wg.Add(1)
        jobs <- j
    }

    close(jobs) // —Å–∏–≥–Ω–∞–ª, —á—Ç–æ –∑–∞–¥–∞—á –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç
    wg.Wait()   // –∂–¥—ë–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á
}
