–í–æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è **–∑–∞–¥–∞—á–∞ –Ω–∞ —Å–µ–º–∞—Ñ–æ—Ä –≤ Go** ‚Äî —Ç–∏–ø–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä –∏–∑ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–π –∏–ª–∏ –∫—É—Ä—Å–æ–≤ –ø–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é:

---

## üî¢ **–ó–∞–¥–∞—á–∞ 8 ‚Äî –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω**

> –ü—É—Å—Ç—å –µ—Å—Ç—å 100 –∑–∞–¥–∞—á, –∏ –º—ã —Ö–æ—Ç–∏–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö **–Ω–µ –±–æ–ª–µ–µ —á–µ–º –ø–æ 5 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**. –†–µ–∞–ª–∏–∑—É–π —ç—Ç–æ —Å –ø–æ–º–æ—â—å—é —Å–µ–º–∞—Ñ–æ—Ä–∞.

---

### ‚úÖ –£—Å–ª–æ–≤–∏—è:

* –ï—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏—è `doWork(i int)` ‚Äî –∏–º–∏—Ç–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏.
* –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å 100 –∑–∞–¥–∞—á.
* –ù–µ –±–æ–ª–µ–µ 5 –∏–∑ –Ω–∏—Ö –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**.

---

### üí° –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–µ–º–∞—Ñ–æ—Ä (–∫–∞–Ω–∞–ª):

```go
package main

import (
    "fmt"
    "sync"
    "time"
)

func doWork(i int) {
    fmt.Printf("Start: %d\n", i)
    time.Sleep(100 * time.Millisecond) // –∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã
    fmt.Printf("End:   %d\n", i)
}

func main() {
    var wg sync.WaitGroup
    sem := make(chan struct{}, 5) // —Å–µ–º–∞—Ñ–æ—Ä –Ω–∞ 5 "–ø—Ä–æ–ø—É—Å–∫–æ–≤"

    for i := 0; i < 100; i++ {
        wg.Add(1)

        go func(i int) {
            defer wg.Done()

            sem <- struct{}{}   // –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º —Å–µ–º–∞—Ñ–æ—Ä
            defer func() { <-sem }() // –æ—Å–≤–æ–±–æ–∂–¥–∞–µ–º

            doWork(i)
        }(i)
    }

    wg.Wait()
}
```

---

### üîç –ß—Ç–æ –¥–µ–ª–∞–µ—Ç `sem := make(chan struct{}, 5)`?

* –≠—Ç–æ **—Å–µ–º–∞—Ñ–æ—Ä**, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ –±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª.
* –í –∫–∞–Ω–∞–ª –º–æ–∂–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å —Ç–æ–ª—å–∫–æ 5 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ ‚Äî –∑–Ω–∞—á–∏—Ç, **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ –±–æ–ª–µ–µ 5 –≥–æ—Ä—É—Ç–∏–Ω**, –¥–µ–ª–∞—é—â–∏—Ö `doWork`.

---

## ‚úÖ –í—ã–≤–æ–¥

* –ö–∞–Ω–∞–ª –∫–∞–∫ —Å–µ–º–∞—Ñ–æ—Ä ‚Äî –∏–¥–∏–æ–º–∞—Ç–∏—á–Ω—ã–π –∏ –ª—ë–≥–∫–∏–π —Å–ø–æ—Å–æ–± –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º–∞ –≤ Go.
* –ú–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –¥—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã: –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ—Å—Ç—É–ø –∫ –ë–î, —Å–æ–∫–µ—Ç–∞–º, API –∏ —Ç. –ø.

---

–•–æ—á–µ—à—å —É—Å–ª–æ–∂–Ω—ë–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–∞–º–∏?
