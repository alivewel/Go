–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑ –∫–∞–Ω–∞–ª–∞ –≤ Go, –≤ –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫—Ç–æ –Ω–µ –ø–∏—à–µ—Ç?	–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –º—ã –∑–∞–±–ª–æ–∫–∏—Ä—É–º—Å—è –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –∫—Ç–æ-—Ç–æ –Ω–µ –∑–∞–ø–∏—à–µ—Ç. –í–æ–∑–º–æ–∂–Ω–∞ –≤–µ—á–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞.

---

‚úÖ –î–∞, —Ç–≤–æ–π –æ—Ç–≤–µ—Ç **–∞–±—Å–æ–ª—é—Ç–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π**. –î–∞–≤–∞–π –Ω–µ–º–Ω–æ–≥–æ —Ä–∞—Å—à–∏—Ä—é, —á—Ç–æ–±—ã —Ç—ã –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ –Ω–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ –≤ —Ä–µ–≤—å—é –∫–æ–¥–∞.

---

## üìå –ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ —á–∏—Ç–∞—Ç—å –∏–∑ –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞, –≤ –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫—Ç–æ –Ω–µ –ø–∏—à–µ—Ç?

**üì• –û–ø–µ—Ä–∞—Ç–æ—Ä `<-chan` (—á—Ç–µ–Ω–∏–µ)** **–∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É**, –ø–æ–∫–∞:

* –∫—Ç–æ-—Ç–æ **–Ω–µ –∑–∞–ø–∏—à–µ—Ç** –≤ –∫–∞–Ω–∞–ª (`chan <-`)
* –∏–ª–∏ –∫–∞–Ω–∞–ª **–Ω–µ –±—É–¥–µ—Ç –∑–∞–∫—Ä—ã—Ç**

### üî¥ –ï—Å–ª–∏ –Ω–∏–∫—Ç–æ **–Ω–µ –ø–∏—à–µ—Ç** ‚Äî –≥–æ—Ä—É—Ç–∏–Ω–∞ –±—É–¥–µ—Ç –∂–¥–∞—Ç—å **–≤–µ—á–Ω–æ**

‚û° –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ **deadlock** (–≤–∑–∞–∏–º–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞), –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —ç—Ç–æ **–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–∞—è –≥–æ—Ä—É—Ç–∏–Ω–∞** –≤ `main()`.

---

## üß™ –ü—Ä–∏–º–µ—Ä:

```go
func main() {
    ch := make(chan int) // –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π

    val := <-ch // ‚ùó –ó–ê–ë–õ–û–ö–ò–†–£–ï–¢–°–Ø –∑–¥–µ—Å—å, —Ç.–∫. –Ω–∏–∫—Ç–æ –Ω–µ –ø–∏—à–µ—Ç
    fmt.Println(val)
}
```

üß® –í—ã–≤–æ–¥:

```
fatal error: all goroutines are asleep - deadlock!
```

---

## üü° –ß—Ç–æ, –µ—Å–ª–∏ –∫–∞–Ω–∞–ª **–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π**?

```go
ch := make(chan int, 2)
<-ch // ‚ùó –ó–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ –≤ –±—É—Ñ–µ—Ä–µ –Ω–∏—á–µ–≥–æ –Ω–µ—Ç
```

‚û° –î–∞–∂–µ —Å –±—É—Ñ–µ—Ä–æ–º: **—á—Ç–µ–Ω–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è**, –µ—Å–ª–∏ –±—É—Ñ–µ—Ä **–ø—É—Å—Ç**.

---

## ‚úÖ –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –≤–µ—á–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

| –ú–µ—Ç–æ–¥                               | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| ----------------------------------- | --------------------------------- |
| üîÅ `select` —Å `default`             | –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–µ —á—Ç–µ–Ω–∏–µ              |
| ‚è± `select` —Å `time.After`           | –¢–∞–π–º–∞—É—Ç –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏              |
| ‚ùì –ü—Ä–æ–≤–µ—Ä–∫–∞ `ok` –∏–∑ –∑–∞–∫—Ä—ã—Ç–æ–≥–æ –∫–∞–Ω–∞–ª–∞ | –ò–∑–≤–ª–µ–∫–∞–µ—Ç zero-value, –Ω–µ –±–ª–æ–∫–∏—Ä—É—è |

---

### üß™ –ü—Ä–∏–º–µ—Ä: —á—Ç–µ–Ω–∏–µ —Å —Ç–∞–π–º–∞—É—Ç–æ–º

```go
select {
case val := <-ch:
    fmt.Println("Received:", val)
case <-time.After(2 * time.Second):
    fmt.Println("Timeout!")
}
```

---

## üìò –í—ã–≤–æ–¥:

> ‚úÖ –ß—Ç–µ–Ω–∏–µ –∏–∑ **–Ω–µ–±—É—Ñ–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –±–µ–∑ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è = –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≥–æ—Ä—É—Ç–∏–Ω—ã**
> ‚ö† –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å **–≤–µ—á–Ω—ã–π –±–ª–æ–∫** –∏–ª–∏ **deadlock**
> ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π `select`, —Ç–∞–π–º–µ—Ä—ã –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É `ok` –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –∏–∑ –∑–∞–∫—Ä—ã—Ç—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

–•–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å —Ç–∞–∫–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á–µ—Ä–µ–∑ `pprof` –∏–ª–∏ `runtime` –≤ Go.
