### Race_condition

В этом разделе поговорим о состоянии гонки. Оно можем быть вам знакомо, если вы занимались БД и изучали транзакции, которые нужны, чтобы атомарно обновить какое-то значение в БД.

В этом примере мы будем мапу со счетчиками из разных горутин. На первый взгляд, если мы посмотрим на код, то ошибок в нем не видны. Мы обновляем разные значения, которые не пересекаются друг с другом, но результат работы этой программы нас может расстроить. Мапа в го конкурентно не безопасный тип данных. Обращаясь к ним обращаясь из разных горутин, которые могут выполняться совершенно на разных процессах можно словить состояние гонки. 

Каким образом это может произойти? Мапа внутри себя - это ссылка на структуру данных, как хеш-таблица и она может перестраиваться, копироваться в другое место, ну или еще что-то может с ней происходить. При этом в кэше одного процессора может лежать одно значение, в кэше другого процессора может лежать другое значение и при попытке обновить значение произойдет коллапс.

При попытке запустить программу мы видим сообщение "concurrent map read and map write".