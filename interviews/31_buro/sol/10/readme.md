–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å ‚Äî —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –∫—Ä–∞—Ç–∫–æ, –Ω–∞–≥–ª—è–¥–Ω–æ –∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.

---

## üß© –í —á—ë–º –æ—Ç–ª–∏—á–∏–µ `WHERE` –∏ `HAVING`?

| –ö—Ä–∏—Ç–µ—Ä–∏–π                     | `WHERE`                       | `HAVING`                                      |
| ---------------------------- | ----------------------------- | --------------------------------------------- |
| –ö–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è            | **–î–æ** –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (`GROUP BY`) | **–ü–æ—Å–ª–µ** –∞–≥—Ä–µ–≥–∞—Ü–∏–∏                           |
| –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫                | **–°—Ç—Ä–æ–∫–∞–º —Ç–∞–±–ª–∏—Ü—ã**           | **–ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º** (`COUNT`, `SUM`, ...) |
| –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç—ã? | ‚ùå –ù–µ—Ç                         | ‚úÖ –î–∞                                          |

---

## üîç –ü—Ä–∏–º–µ—Ä

–î–æ–ø—É—Å—Ç–∏–º, —É –Ω–∞—Å —Ç–∞–±–ª–∏—Ü–∞ `orders`:

| id | user\_id | amount |
| -- | -------- | ------ |
| 1  | 1        | 100    |
| 2  | 1        | 200    |
| 3  | 2        | 50     |
| 4  | 3        | 150    |
| 5  | 3        | 100    |

---

### üìå –ó–∞–¥–∞—á–∞: –≤—ã–±—Ä–∞—Ç—å `user_id`, —É –∫–æ—Ç–æ—Ä—ã—Ö **—Å—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤ > 200**

### ‚ùå –¢–∞–∫ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è (`WHERE` –Ω–µ –º–æ–∂–µ—Ç —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å `SUM`):

```sql
SELECT user_id, SUM(amount)
FROM orders
WHERE SUM(amount) > 200 -- ‚ùå –æ—à–∏–±–∫–∞!
GROUP BY user_id
```

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ —Å `HAVING`:

```sql
SELECT user_id, SUM(amount) AS total
FROM orders
GROUP BY user_id
HAVING SUM(amount) > 200;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| user\_id | total |
| -------- | ----- |
| 1        | 300   |
| 3        | 250   |

---

## ‚úÖ –ï—â—ë —Ä–∞–∑ –ø–æ —à–∞–≥–∞–º:

1. `WHERE` ‚Üí —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ **–¥–æ** `GROUP BY`
2. `GROUP BY` ‚Üí –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏
3. `HAVING` ‚Üí —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç **–ø–æ—Å–ª–µ** –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

---

## üéØ –ó–∞–ø–æ–º–Ω–∏ –ø—Ä–æ—Å—Ç—É—é —Ñ–æ—Ä–º—É–ª—É:

> `WHERE` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç **—Å—ã—Ä—ã–µ —Å—Ç—Ä–æ–∫–∏**
> `HAVING` ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç **–∞–≥—Ä–µ–≥–∞—Ç—ã**

---

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–π –≤–æ–ø—Ä–æ—Å –Ω–∞ —Å–æ–±–µ—Å–µ:

> –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `HAVING` –±–µ–∑ `GROUP BY`?

‚úÖ –î–∞. –¢–æ–≥–¥–∞ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ `WHERE`, –Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```sql
SELECT COUNT(*) as cnt
FROM orders
HAVING COUNT(*) > 3;
```

---

–•–æ—á–µ—à—å, —è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é –ø–æ–ª–Ω—É—é SQL-–∑–∞–¥–∞—á—É —Å `JOIN`, `GROUP BY`, `HAVING`, –∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏, –∫–∞–∫ –Ω–∞ —Å–æ–±–µ—Å–µ?
