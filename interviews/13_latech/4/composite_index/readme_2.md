–ê –∏–Ω–¥–µ–∫—Å –±—É–¥–µ—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—é where? –ù–∞ –∫–∞–∫–∏–µ –µ—â–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å?

–ù–µ—Ç, **–∏–Ω–¥–µ–∫—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –≤ `WHERE`** ‚Äî –æ–Ω–∏ —Ç–∞–∫–∂–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —Ä—è–¥–µ –¥—Ä—É–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤ SQL. –ù–∏–∂–µ ‚Äî —Å–ø–∏—Å–æ–∫ –∏ –ø–æ—è—Å–Ω–µ–Ω–∏–µ:

---

### üìå –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω–¥–µ–∫—Å –≤ SQL?

#### 1. **`WHERE`** ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç—Ä–æ–∫

–°–∞–º—ã–π –æ—á–µ–≤–∏–¥–Ω—ã–π –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π —Å–ª—É—á–∞–π:

```sql
SELECT * FROM users WHERE email = 'user@example.com';
```

#### 2. **`JOIN`** ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

–ï—Å–ª–∏ `JOIN` –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –∫–æ–ª–æ–Ω–∫–µ —Å –∏–Ω–¥–µ–∫—Å–æ–º, —Ç–æ –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω:

```sql
SELECT * FROM orders
JOIN customers ON orders.customer_id = customers.id;
```

–ï—Å–ª–∏ `customers.id` ‚Äî –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω, –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞.

#### 3. **`ORDER BY`** ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞

–ï—Å–ª–∏ –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø–æ—Ä—è–¥–∫–æ–º –≤ –∏–Ω–¥–µ–∫—Å–µ, –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è **–∏–∑–±–µ–∂–∞–Ω–∏—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –≤—Ä—É—á–Ω—É—é**:

```sql
SELECT * FROM products ORDER BY created_at DESC;
```

–ï—Å–ª–∏ `created_at` –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω ‚Äî —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å "–±–µ—Å–ø–ª–∞—Ç–Ω–æ–π".

> ‚ö†Ô∏è –û–¥–Ω–∞–∫–æ: –µ—Å–ª–∏ —Ç—ã —Å–æ—Ä—Ç–∏—Ä—É–µ—à—å **–≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ** –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–æ–ª–æ–Ω–∫–∞–º –∏–ª–∏ –Ω–µ —Å —Å–∞–º–æ–≥–æ –ª–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–Ω–¥–µ–∫—Å–∞, –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω.

#### 4. **`GROUP BY`**

–ü—Ä–∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–µ –ø–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–ª–æ–Ω–∫–∞–º (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ `GROUP BY` = `ORDER BY`), –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è:

```sql
SELECT category_id, COUNT(*) FROM products GROUP BY category_id;
```

#### 5. **`SELECT DISTINCT`**

–ü–æ—Ö–æ–∂–µ –Ω–∞ `GROUP BY`. –ï—Å–ª–∏ —Ç—ã –¥–µ–ª–∞–µ—à—å `SELECT DISTINCT` –ø–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ, –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –ø–æ–º–æ—á—å.

#### 6. **`IN (...)`**

–†–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `WHERE col = value`:

```sql
SELECT * FROM users WHERE id IN (1, 2, 3);
```

#### 7. **`EXISTS` / `NOT EXISTS`**

–ï—Å–ª–∏ –ø–æ–¥–∑–∞–ø—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ, –∏–Ω–¥–µ–∫—Å –±—É–¥–µ—Ç –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω.

#### 8. **`LIMIT` + `ORDER BY`**

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –º–æ–∂–µ—Ç –æ—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∏–Ω–¥–µ–∫—Å–æ–º:

```sql
SELECT * FROM logs ORDER BY created_at DESC LIMIT 100;
```

‚Üí –∏–Ω–¥–µ–∫—Å –ø–æ `created_at DESC` –ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –≤—ã–¥–∞—Ç—å –ø–µ—Ä–≤—ã–µ 100 –∑–∞–ø–∏—Å–µ–π.

---

### üí° –ü—Ä–∏–º–µ—Ä: —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å `(a, b)` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏

| –ó–∞–ø—Ä–æ—Å                  | –ò–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?      |
| ----------------------- | ------------------------- |
| `WHERE a = ?`           | ‚úÖ –î–∞                      |
| `WHERE a = ? AND b = ?` | ‚úÖ –î–∞                      |
| `WHERE b = ?`           | ‚ùå –ù–µ—Ç (–µ—Å–ª–∏ `a` –ø—Ä–æ–ø—É—â–µ–Ω) |
| `ORDER BY a, b`         | ‚úÖ –î–∞                      |
| `ORDER BY b`            | ‚ùå –ù–µ—Ç                     |

---

### üß™ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å?

`EXPLAIN` –∏ `EXPLAIN ANALYZE` –≤ PostgreSQL / MySQL –ø–æ–∫–∞–∂—É—Ç, **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏ –∏–Ω–¥–µ–∫—Å** –∏ **–≤ –∫–∞–∫–æ–º –≤–∏–¥–µ** (`Index Scan`, `Index Only Scan`, `Bitmap Index Scan`, `Using Index`, –∏ —Ç.–¥.).

---

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å —Ç–≤–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∏ —Å–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –æ–Ω –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.
